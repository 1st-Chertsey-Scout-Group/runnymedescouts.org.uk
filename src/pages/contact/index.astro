---
import Seperator from "@/components/seperator.astro";
import PageLayout from "@/layouts/page.layout.astro";
import { getCollection, type CollectionEntry } from "astro:content";
import { Block, Form } from "basecamp/components";
import type { Option } from "basecamp/models";

const groups: Option[] = (await getCollection("groups"))
    .filter((group: CollectionEntry<"groups">) => group.data.enabled)
    .map((g) => {
        return { type: "option", label: g.data.name, id: g.slug };
    });
const units: Option[] = (await getCollection("units"))
    .filter((group: CollectionEntry<"units">) => group.data.enabled)
    .map((g) => {
        return { type: "option", label: g.data.name, id: g.slug };
    });
---

<PageLayout
    title="Contact Runnymede | Get Involved in Scouting Today"
    description="Get in touch with Runnymede. Whether you have questions about joining, events, or volunteering, our contact page provides all the information you need to reach out and connect with us."
>
    <Block.Wrapper id="contact">
        <Block.Seperator slot="seperator">
            <Seperator loading="eager" />
        </Block.Seperator>
        <Block.Header slot="header" className="text-primary">
            Contact Us
        </Block.Header>
        <Block.SubHeader slot="subHeader">
            If you want to get involved with Scouting as a volunteer or gain
            skills for life as a Squirrel, Beaver, Cub, Scout or Explorer, or if
            you have any other questions about scouting in Runnymede, get in
            contact with us!
        </Block.SubHeader>
        <Block.Body size="md" slot="body">
            <Form.Wrapper
                name="contact"
                action="/functions/enquiry"
                button="Send Message"
            >
                <Form.TextBox
                    id="email"
                    type="email"
                    label="Email"
                    placeholder="bear.grylls@scouts.org.uk"
                    required={true}
                />

                <Form.TextBox
                    id="name"
                    type="text"
                    label="Name"
                    placeholder="Bear Grylls"
                    required={true}
                />

                <Form.Select
                    id="subject"
                    label="Subject"
                    required={true}
                    options={[
                        {
                            label: "General Enquiry",
                            type: "option",
                            id: "enquiry",
                        },
                        { type: "group", label: "Groups", options: groups },
                        { type: "group", label: "Units", options: units },
                    ]}
                />

                <Form.TextArea
                    id="message"
                    label="Message"
                    placeholder="Leave a comment..."
                    required={true}
                />
            </Form.Wrapper>
        </Block.Body>
    </Block.Wrapper>
</PageLayout>
