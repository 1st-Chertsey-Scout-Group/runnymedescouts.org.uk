---
import {
    ViewCartButton,
    ViewCartButtonFallback,
} from "@/components/shop/view-cart-button";
import PageLayout from "./page.layout.astro";
import { Button } from "basecamp/components";
import { ArrowLeft } from "lucide-react";
import { cn } from "basecamp/libs";

interface PageProps {
    title: string;
    description: string;
}

const { title, description }: PageProps =
    Astro.props.frontmatter || Astro.props;

const currentPath = Astro.url.pathname;

const isShopHome = currentPath == "/shop";
---

<PageLayout title={title} description={description}>
    <div
        class={cn("max-w-screen-md mx-auto flex pt-8 pr-4 text-right", {
            "justify-between": !isShopHome,
            "flex-row-reverse": isShopHome,
        })}
    >
        {
            !isShopHome && (
                <a href="/shop" class="w-1/4">
                    <Button
                        Icon={ArrowLeft}
                        text="Back to Shop"
                        type="button"
                        variant="link"
                        size="small"
                        iconClassName="order-first"
                    />
                </a>
            )
        }

        <a href="/shop/basket" class="text-foreground hover:text-primary">
            <ViewCartButton client:only="react">
                <div slot="fallback">
                    <ViewCartButtonFallback />
                </div>
            </ViewCartButton></a
        >
    </div>

    <slot />
</PageLayout>
